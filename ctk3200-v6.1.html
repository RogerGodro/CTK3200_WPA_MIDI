<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<meta name="theme-color" content="#0a0a14">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<title>CTK-3200 MIDI Arranger v6.1</title>
<style>
body { background:#0a0a14; color:#fff; font-family:sans-serif; margin:0; }
</style>
</head>
<body>
<h2 style="text-align:center">CTK-3200 MIDI Arranger v6.1</h2>
<p style="text-align:center">Version simplifiée pour test de connexion MIDI Casio CTK-3200</p>
<button id="connectBtn" style="display:block;margin:40px auto;padding:12px 24px;">CONNECT</button>
<p id="status" style="text-align:center;color:#0f0;">MIDI OFF</p>
<script>
let midiOut=null, midiAccessGlobal=null;
document.getElementById('connectBtn').onclick=()=>{
  if(!navigator.requestMIDIAccess){ alert('MIDI non supporté'); return; }
  navigator.requestMIDIAccess({sysex:false}).then(onSuccess,onFail);
};
function onSuccess(access){
  midiAccessGlobal=access;
  const outs=[...access.outputs.values()];
  let casio=outs.find(o=>o.name.toLowerCase().includes('casio'))||outs[0];
  if(casio){ midiOut=casio; document.getElementById('status').textContent='MIDI ON'; document.getElementById('status').style.color='#0f0'; }
  const ins=[...access.inputs.values()];
  let casioIn=ins.find(i=>i.name.toLowerCase().includes('casio'))||ins[0];
  if(casioIn){ casioIn.onmidimessage=e=>{console.log('IN',e.data);} }
}
function onFail(){ alert('Échec de la connexion MIDI'); }
</script>
</body>
</html>